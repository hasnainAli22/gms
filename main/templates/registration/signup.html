{% extends "base.html" %}
{% load static %}
{% block content %}
    {% if not request.user.is_authenticated %}
        <!-- Main Start -->
        <section class="mt-3">
            <h1 class="text-center mb-4 section-heading pb-2">Sign Up</h1>
            <div class="container-fluid h-custom">
                <div class="row d-flex justify-content-center align-items-center">
                    <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1 order-1 order-lg-0">
                        <form method="post">
                            {% csrf_token %}
                            <!-- First Name input -->
                            <div class="form-outline mb-4">
                                <label class="form-label" for="form-first-name">First Name</label>
                                {{ form.first_name }}
                                {% if form.first_name.errors %}<div class="alert alert-danger">{{ form.first_name.errors }}</div>{% endif %}
                            </div>
                            <!-- Last Name input -->
                            <div class="form-outline mb-4">
                                <label class="form-label" for="form-last-name">Last Name</label>
                                {{ form.last_name }}
                                {% if form.last_name.errors %}<div class="alert alert-danger">{{ form.last_name.errors }}</div>{% endif %}
                            </div>
                            <!-- Phone Number input -->
                            <div class="form-outline mb-4">
                                <label class="form-label" for="form-phone-number">Phone Number</label>
                                {{ form.phone_number }}
                                {% if form.phone_number.errors %}<div class="alert alert-danger">{{ form.phone_number.errors }}</div>{% endif %}
                            </div>
                            <!-- Email input -->
                            <div class="form-outline mb-4">
                                <label class="form-label" for="form-email">Email address</label>
                                {{ form.email }}
                                {% if form.email.errors %}<div class="alert alert-danger">{{ form.email.errors }}</div>{% endif %}
                            </div>
                            <!-- Username input -->
                            <div class="form-outline mb-4">
                                <label class="form-label" for="form-username">Username</label>
                                {{ form.username }}
                                {% if form.username.errors %}<div class="alert alert-danger">{{ form.username.errors }}</div>{% endif %}
                            </div>
                            <!-- Password input -->
                            <div class="form-outline mb-3">
                                <label class="form-label" for="form-password">Password</label>
                                {{ form.password1 }}
                                {% if form.password1.errors %}<div class="alert alert-danger">{{ form.password1.errors }}</div>{% endif %}
                            </div>
                            <!-- Confirm Password -->
                            <div class="form-outline mb-3">
                                <label class="form-label" for="form-password-confirm">Confirm Password</label>
                                {{ form.password2 }}
                                {% if form.password2.errors %}<div class="alert alert-danger">{{ form.password2.errors }}</div>{% endif %}
                            </div>
                            <div class="text-center text-lg-start mt-4 pt-2">
                                <button class="btn btn-primary btn-lg w-100" type='submit'>Register</button>
                                <p class="small fw-bold mt-2 pt-1 mb-0">
                                    Already have an account? <a href="{% url 'login' %}" class="link-primary">Login</a>
                                </p>
                            </div>
                        </form>
                    </div>
                    <div class="col-md-9 col-lg-6 col-xl-5 order-0 order-lg-1 sign-up-margin">
                        {% load static %}
                        <img src="{% static 'imgs/login.png' %}"
                             class="img-fluid rounded"
                             height="auto"
                             width="auto"
                             alt="Sample image">
                    </div>
                </div>
            </div>
        </section>
        <!-- End -->
    {% else %}
        <p>Already LoggedIn</p>
    {% endif %}
    <!-- Add this script at the end of your template, before the closing </body> tag -->
    <script>
    // Get all form fields
    const formFields = document.querySelectorAll('.form-control');

    // Add event listener to each form field
    formFields.forEach(field => {
        field.addEventListener('input', () => {
            // Get the parent element of the field (which contains the error message)
            const parent = field.parentElement;

            // Check if the parent has an error message element
            if (parent.querySelector('.alert-danger')) {
                // Remove the error message
                parent.querySelector('.alert-danger').remove();
            }
        });
    });
    </script>
{% endblock content %}
